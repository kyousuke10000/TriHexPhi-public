# GitHub Actions å¤±æ•—åˆ†æã¨å¯¾å‡¦æ³•

**Date:** 2025-11-05
**Context:** PR #34 (`feat/remote-truth-rollout`) ã§ã®è¤‡æ•°ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å¤±æ•—

---

## ğŸ” å¤±æ•—ã—ã¦ã„ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### æ–°è¦è¿½åŠ 
- `mirror_gate.yml` - Mirror Gateï¼ˆPublic Mirrorï¼‰

### æ—¢å­˜ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
- `gatekeeper-trio.yml`
- `chl_monitor.yml`
- `gemini_render.yml`
- `review-request.yml`
- `cursor-notifier.yml`
- `trihex_discussion_bridge.yml`
- `ai_sync.yml`
- `task-generator.yml`

### æˆåŠŸã—ã¦ã„ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
- `Harmonia CI` âœ…

---

## ğŸ“‹ å¤±æ•—ã®ä¸€èˆ¬çš„ãªåŸå› 

### 1. Secretsæœªè¨­å®šï¼ˆç‰¹ã«æ–°è¦ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼‰

**`mirror_gate.yml`ã®å ´åˆ:**
- `MIRROR_REPO`: æœªè¨­å®šï¼ˆå…¬é–‹ãƒªãƒãŒã¾ã ä½œæˆã•ã‚Œã¦ã„ãªã„ï¼‰
- `MIRROR_TOKEN`: æœªè¨­å®šï¼ˆPATãŒã¾ã ä½œæˆã•ã‚Œã¦ã„ãªã„ï¼‰

**å¯¾å‡¦æ³•:**
- å…¬é–‹ãƒªãƒã‚¸ãƒˆãƒª `TriHexPhi-public` ã‚’ä½œæˆ
- Fine-grained PATã‚’ä½œæˆï¼ˆ`contents:write`æ¨©é™ï¼‰
- Repository Secretsã«è¿½åŠ :
  - `MIRROR_REPO`: `kyousuke10000/TriHexPhi-public`
  - `MIRROR_TOKEN`: `<PATãƒˆãƒ¼ã‚¯ãƒ³>`

### 2. ãƒ–ãƒ©ãƒ³ãƒåˆ¶é™

**`mirror_gate.yml`ã®å ´åˆ:**
```yaml
on:
  push:
    branches: [ main ]  # mainãƒ–ãƒ©ãƒ³ãƒã§ã®ã¿å®Ÿè¡Œ
```

**ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒ (`feat/remote-truth-rollout`) ã§ã¯å®Ÿè¡Œã•ã‚Œãªã„**
- ã“ã‚Œã¯**æ­£å¸¸ãªå‹•ä½œ**ã§ã™
- mainã«ãƒãƒ¼ã‚¸ã•ã‚ŒãŸå¾Œã«å®Ÿè¡Œã•ã‚Œã¾ã™

### 3. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®æ¤œè¨¼ã‚¨ãƒ©ãƒ¼

ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ãŒpushã•ã‚ŒãŸæ™‚ç‚¹ã§ã€GitHubãŒæ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã„ã¾ã™ã€‚
- SecretsãŒæœªè¨­å®šã§ã‚‚æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
- ã“ã‚Œã¯**å®Ÿéš›ã®å®Ÿè¡Œå¤±æ•—**ã§ã¯ãªãã€**è¨­å®šä¸è¶³ã®è­¦å‘Š**ã§ã™

### 4. æ—¢å­˜ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å¤±æ•—

æ—¢å­˜ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã§å¤±æ•—ã™ã‚‹å ´åˆï¼š
- ãƒ–ãƒ©ãƒ³ãƒåˆ¶é™ï¼ˆmain/developã§ã®ã¿å®Ÿè¡Œï¼‰
- å¿…è¦ãªSecrets/ç’°å¢ƒå¤‰æ•°ãŒãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã§ã¯åˆ©ç”¨ä¸å¯
- PRç”¨ã®è¨­å®šãŒä¸é©åˆ‡

---

## âœ… æ­£å¸¸ãªçŠ¶æ…‹ã‹ã©ã†ã‹ã®åˆ¤æ–­

### æ­£å¸¸ï¼ˆå•é¡Œãªã—ï¼‰ã®å ´åˆ

1. **`mirror_gate.yml`ã®å¤±æ•—**
   - âœ… Secretsæœªè¨­å®šã¯æƒ³å®šå†…
   - âœ… mainã«ãƒãƒ¼ã‚¸å¾Œã€Secretsè¨­å®šå¾Œã«åˆå›å®Ÿè¡Œã™ã‚Œã°OK
   - âœ… ç¾æ™‚ç‚¹ã§ã¯ç„¡è¦–ã—ã¦è‰¯ã„

2. **æ—¢å­˜ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å¤±æ•—ï¼ˆãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒï¼‰**
   - âœ… ãƒ–ãƒ©ãƒ³ãƒåˆ¶é™ã§mainã§ã®ã¿å®Ÿè¡Œã•ã‚Œã‚‹å ´åˆã¯æ­£å¸¸
   - âœ… PRãƒãƒ¼ã‚¸å¾Œã®mainãƒ–ãƒ©ãƒ³ãƒã§æˆåŠŸã™ã‚Œã°å•é¡Œãªã—

### å•é¡ŒãŒã‚ã‚‹å ´åˆ

1. **mainãƒ–ãƒ©ãƒ³ãƒã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå¤±æ•—ã™ã‚‹**
   - âŒ ã“ã‚Œã¯å•é¡Œã€‚èª¿æŸ»ãƒ»ä¿®æ­£ãŒå¿…è¦

2. **å¿…è¦ãªSecretsãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã®ã«å¤±æ•—ã™ã‚‹**
   - âŒ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è‡ªä½“ã®å•é¡Œã€‚ãƒ­ã‚°ã‚’ç¢ºèªã—ã¦ä¿®æ­£ãŒå¿…è¦

---

## ğŸ”§ å¯¾å‡¦æ³•

### å³åº§ã«å¿…è¦ãªå¯¾å¿œ

**ãªã—** - ç¾æ™‚ç‚¹ã§ã¯ã€ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã§ã®å¤±æ•—ã¯æƒ³å®šå†…ã§ã™ã€‚

### PRãƒãƒ¼ã‚¸å‰ã®ç¢ºèªäº‹é …

1. **Council GateãŒç·‘ã«ãªã‚‹ã‹ç¢ºèª**
   - ã“ã‚ŒãŒæœ€é‡è¦ã€‚ä»–ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å¤±æ•—ã¯ä¸€æ—¦ç„¡è¦–ã—ã¦OK

2. **mainãƒ–ãƒ©ãƒ³ãƒã«ãƒãƒ¼ã‚¸å¾Œ**
   - `mirror_gate.yml`ã‚’åˆå›å®Ÿè¡Œï¼ˆSecretsè¨­å®šå¾Œï¼‰
   - æ—¢å­˜ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒmainã§æˆåŠŸã™ã‚‹ã‹ç¢ºèª

### Secretsè¨­å®šæ‰‹é †ï¼ˆMirror Gateç”¨ï¼‰

1. GitHub > Settings > Secrets and variables > Actions
2. New repository secret ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ä»¥ä¸‹ã‚’è¿½åŠ :
   - Name: `MIRROR_REPO`, Value: `kyousuke10000/TriHexPhi-public`
   - Name: `MIRROR_TOKEN`, Value: `<Fine-grained PAT>`

---

## ğŸ’¡ æ¨å¥¨äº‹é …

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­è¨ˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **ãƒ–ãƒ©ãƒ³ãƒåˆ¶é™ã‚’æ˜ç¢ºã«**
   ```yaml
   on:
     push:
       branches: [ main ]  # mainã§ã®ã¿å®Ÿè¡Œ
   ```

2. **Secretsæœªè¨­å®šæ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**
   ```yaml
   - name: Check secrets
     if: ${{ !secrets.MIRROR_REPO }}
     run: echo "âš ï¸ Secrets not configured. Skipping..."
   ```

3. **ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã§ã®å®Ÿè¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—**
   ```yaml
   - name: Skip on feature branches
     if: github.ref != 'refs/heads/main'
     run: echo "Skipping on feature branch" && exit 0
   ```

---

## ğŸ“Š ç¾çŠ¶ã¾ã¨ã‚

| ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ | å¤±æ•—ç†ç”± | å¯¾å‡¦ãŒå¿…è¦ï¼Ÿ |
|------------|---------|------------|
| `mirror_gate.yml` | Secretsæœªè¨­å®š | âŒ ãƒãƒ¼ã‚¸å¾Œã«è¨­å®š |
| æ—¢å­˜ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ | ãƒ–ãƒ©ãƒ³ãƒåˆ¶é™/è¨­å®šä¸è¶³ | âŒ mainã§ç¢ºèª |

**çµè«–:** ç¾æ™‚ç‚¹ã®å¤±æ•—ã¯**æƒ³å®šå†…**ã§ã™ã€‚Council GateãŒç·‘ã«ãªã‚Šã€mainã«ãƒãƒ¼ã‚¸ã§ãã‚Œã°å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

---

**Status:** âœ… **åˆ†æå®Œäº† - ç¾çŠ¶ã¯æ­£å¸¸ç¯„å›²å†…**

**Generated:** 2025-11-05 / Cursor (â˜¿)
